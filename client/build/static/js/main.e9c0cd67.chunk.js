(this.webpackJsonpmern=this.webpackJsonpmern||[]).push([[0],{36:function(e,t,a){"use strict";(function(e){var n=a(0),l=a.n(n);a(70).config({path:e+"/../.env"});t.a=function(){window.OneSignal=window.OneSignal||[];var e=window.OneSignal;return Object(n.useEffect)((function(){e.push((function(){e.init({appId:"8b810290-7d46-46a1-95d0-823517ca3dee",promptOptions:{slidedown:{enabled:!0,actionMessage:"We'd like to notify you of matches for new play dates for you.",acceptButtonText:"Yes!",cancelButtonText:"Maybe later."}},welcomeNotification:{title:"Puppy Love | Creating New Play Dates",message:"Thanks for subscribing!"}},e.sendSelfNotification("Puppy Love","Welcome back!","http://localhost:3000"))}))})),l.a.createElement(l.a.Fragment,null)}}).call(this,"/")},39:function(e,t,a){e.exports=a(88)},44:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){},73:function(e,t,a){},81:function(e,t,a){},86:function(e,t,a){},88:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),c=a(35),r=a.n(c),o=(a(44),a(14)),i=a(1),s=a(3),m=(a(51),function(){var e=Object(s.b)().loginWithRedirect;return l.a.createElement("button",{onClick:function(){return e()}},"Log In")}),u=function(){return l.a.createElement("main",{id:"main-splash"},l.a.createElement("section",{id:"logo"},l.a.createElement("img",{src:"../../../img/puppy-love.png",alt:"Logo"})),l.a.createElement("section",{id:"message"},l.a.createElement("h5",null,"Discover new friends for your lovely pets around your area."),l.a.createElement("p",null,"You must have a pet to enjoy this app."),l.a.createElement("p",null,"This application requires ",l.a.createElement("b",null,"Location Service")," to be ON"),l.a.createElement(m,null)))};var d=function(){return l.a.createElement("div",null,l.a.createElement("ul",{className:"collection"},l.a.createElement("li",{className:"collection-item avatar"},l.a.createElement("img",{src:"../../../img/dog-01.jpg",alt:"",className:"circle"}),l.a.createElement("p",null,"2021-03-17"),l.a.createElement("span",{className:"title"},"Cutedog123")," sent you a bark!",l.a.createElement("p",null,"Respond with a bark if you are interested in meeting up"),l.a.createElement("a",{href:"#!",className:"secondary-content"},l.a.createElement("i",{className:"material-icons"},"send"))),l.a.createElement("li",{className:"collection-item avatar"},l.a.createElement("img",{src:"../../../img/dog-02.jpg",alt:"",className:"circle"}),l.a.createElement("p",null,"2021-03-16"),l.a.createElement("span",{className:"title"},"good_boy")," sent you a bark!",l.a.createElement("p",null,"Respond with a bark if you are interested in meeting up"),l.a.createElement("a",{href:"#!",className:"secondary-content"},l.a.createElement("i",{className:"material-icons"},"send"))),l.a.createElement("li",{className:"collection-item avatar"},l.a.createElement("img",{src:"../../../img/dog-03.jpg",alt:"",className:"circle"}),l.a.createElement("p",null,"2021-03-13"),l.a.createElement("span",{className:"title"},"Puppylove_91")," sent you a bark!",l.a.createElement("p",null,"Respond with a bark if you are interested in meeting up"),l.a.createElement("a",{href:"#!",className:"secondary-content"},l.a.createElement("i",{className:"material-icons"},"send"))),l.a.createElement("li",{className:"collection-item avatar"},l.a.createElement("img",{src:"../../../img/dog-04.jpg",alt:"",className:"circle"}),l.a.createElement("p",null,"2021-03-12"),l.a.createElement("span",{className:"title"},"woofy102")," sent you a bark!",l.a.createElement("p",null,"Respond with a bark if you are interested in meeting up"),l.a.createElement("a",{href:"#!",className:"secondary-content"},l.a.createElement("i",{className:"material-icons"},"send")))))},g=a(9),f=a(11),h=a(16),p=a(17),E=a(19),v=a(18),b=(a(52),a(7)),N=a.n(b),O=0,j=function(e,t,a){var n=e[t];return e[t]=e[a],e[a]=n,e},w={getNextDog:function(e){N.a.get("https://dog.ceo/api/breeds/image/random/").then((function(e){return console.log(e),e.data.message})).then((function(t){return e(t)}))},getNextDogsNoCheck:function(e,t){N.a.get("https://dog.ceo/api/breeds/image/random/"+e).then((function(e){return console.log(e),e.data.message})).then((function(e){var a=e.map((function(e,t){var a,n=function(e){for(var t,a=[],n=1;n<=e;n++)a.push(n);for(var l=e-1;l>=0;l--)t=Math.floor(Math.random()*l),j(a,l,t);return a}(10);return{id:++O,image:e,email:"lucky"+O+"@doggymail.com",name:"lucky"+O,liked:(a={},Object(g.a)(a,n[0],!!Math.floor(4*Math.random())),Object(g.a)(a,n[1],!!Math.floor(4*Math.random())),Object(g.a)(a,n[2],!!Math.floor(4*Math.random())),Object(g.a)(a,n[3],!!Math.floor(4*Math.random())),Object(g.a)(a,n[4],!!Math.floor(4*Math.random())),a)}}));return t(a)}))},getDog:function(e){return N.a.get("/api/dogs/"+e)},saveDogProfile:function(e,t){return N.a.put("/api/dogs/"+e,t)},getNewDog:function(e){return N.a.get("/api/dogs/newdog/"+e)},getNewDogs:function(e){return N.a.get("/api/dogs/newdogs/"+e)},likeOrDislike:function(e,t){return N.a.get("/api/dogs/swipe/"+e,t)},checkIfMatch:function(e,t){return N.a.get("/api/dogs/check/"+e,t)},getAllMatches:function(e){return N.a.get("/api/dogs/matches/"+e)}},y=a(36),k=function(e){Object(E.a)(a,e);var t=Object(v.a)(a);function a(){return Object(h.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){return console.log(this.props),this.props.match?l.a.createElement("div",null,"You matched with ",this.props.thisDog):""}}]),a}(n.Component),D=function(e){Object(E.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={id:1,name:"Spot",email:"spotty@gmail.com",currentMatch:!1,currentDog:{image:"/img/dog-05.jpeg",name:"Doge",id:0,email:"natasha.fray9@gmail.com",liked:{1:!1,2:!1,3:!1,4:!1}},dogList:[],dogIndex:0,liked:{}},e.getNextDog=function(){console.log(e.state.dogIndex,e.state.dogList.length),e.setState({dogIndex:e.state.dogIndex+1}),console.log(e.state)},e.getPreviousDog=function(){console.log(e.state.dogIndex,e.state.currentDog),e.setState({dogIndex:e.state.dogIndex-1})},e.likeDog=function(){e.setState({liked:Object(f.a)(Object(g.a)({},e.state.currentDog.id,!0),e.state.liked)}),e.setState({liked:Object(f.a)(Object(g.a)({},e.state.currentDog.id,!0),e.state.liked)}),console.log(e.state.currentDog.liked[e.state.id]),e.getNextDog()},e.dislikeDog=function(){e.setState({liked:Object(f.a)(Object(g.a)({},e.state.currentDog.id,!1),e.state.liked)}),e.getNextDog()},e.showNextBtn=function(){if(e.state.currentMatch)return l.a.createElement("i",{className:"material-icons forward",onClick:e.getNextDog},"arrow_forward_ios")},e.showMatch=function(){if(e.state.currentMatch)return l.a.createElement("div",null,"Match!!!")},e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=this;console.log("component did mount"),w.getNextDogsNoCheck(10,(function(t){e.setState({dogList:t})}))}},{key:"componentDidUpdate",value:function(e,t){console.log("component did update"),console.log(this.state),this.state.dogIndex!==t.dogIndex&&this.setState({currentDog:this.state.dogList[this.state.dogIndex],currentMatch:this.state.currentDog.liked[this.state.id]===this.state.liked[this.state.currentDog.id]&&!0===this.state.liked[this.state.currentDog.id]})}},{key:"render",value:function(){return l.a.createElement("div",{className:"row"},l.a.createElement(y.a,null),l.a.createElement("div",{className:"col s12 m12"},l.a.createElement("div",{className:"card"},l.a.createElement("div",{className:"card-image dog-image"},l.a.createElement("img",{src:this.state.currentDog.image}),l.a.createElement("span",{className:"card-title dog-name"},this.state.currentDog.name)),l.a.createElement("div",{className:"card-action bark-back"},l.a.createElement("a",{href:"#"},l.a.createElement("span",{className:"material-icons dislike",onClick:this.dislikeDog},"thumb_down")),l.a.createElement(k,{match:this.state.currentMatch,thisDog:this.state.currentDog.name}),l.a.createElement("a",{href:"#"},l.a.createElement("span",{className:"material-icons like",onClick:this.likeDog},"thumb_up"))))))}}]),a}(n.Component),x=function(){var e=Object(s.b)().logout;return l.a.createElement("button",{className:"btn-flat white-text",onClick:function(){return e({returnTo:window.location.origin})}},"Log Out")},S=function(){return Object(s.b)().isAuthenticated?l.a.createElement(x,null):l.a.createElement(m,null)},C=(a(73),function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("header",null,l.a.createElement("nav",{id:"navbar"},l.a.createElement("div",{className:"nav-wrapper"},l.a.createElement("a",{href:"/",className:"brand-logo",id:"nav-logo"},l.a.createElement("img",{src:"../../../img/puppy-love-small.png",alt:""})),l.a.createElement("ul",{id:"nav-mobile",className:"right hide-on-med-and-down"},l.a.createElement("li",null,l.a.createElement("a",{href:"/"},"Home")),l.a.createElement("li",null,l.a.createElement("a",{href:"/dogs/605e58f29f0ef52213ba4747"},"Profile")),l.a.createElement("li",null,l.a.createElement(S,{className:"btn-flat white-text"}))))),l.a.createElement("nav",{id:"nav-mobile",className:"hide-on-large-only"},l.a.createElement("div",{className:"nav-wrapper"},l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("a",{href:"/"},l.a.createElement("i",{className:"material-icons"},"home"))),l.a.createElement("li",null,l.a.createElement("a",{href:"/matches"},l.a.createElement("i",{className:"material-icons"},"pets"))),l.a.createElement("li",null,l.a.createElement("a",{href:"/"},l.a.createElement("i",{className:"material-icons"},"person"))),l.a.createElement("li",null,l.a.createElement("a",{href:"/"},"Logout")))))))}),L=function(){return l.a.createElement("div",{className:"spinner"},l.a.createElement("img",{src:"../../../img/loading.svg",alt:"Loading"}))};var M=Object(s.c)((function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(C,null),l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"section"},l.a.createElement("div",{className:"col s12 m6"},l.a.createElement(D,null)),l.a.createElement("div",{className:"col s12 m6"},l.a.createElement(d,null))))))}),{onredirecting:function(){return l.a.createElement(L,null)}}),T=function(){return Object(s.b)().isAuthenticated?l.a.createElement(M,null):l.a.createElement(u,null)};var I=function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(T,null))},P=a(8);function A(e){var t=e.children;return l.a.createElement("div",{className:"container"},t)}function R(e){var t=e.children;return l.a.createElement("div",{className:"row"},t)}function W(e){var t=e.size,a=e.children;return l.a.createElement("div",{className:t.split(" ").map((function(e){return"col s"+e})).join(" ")},a)}var B=a(21),F=a.n(B),z=function(e){Object(E.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).handleChange=function(e){n.setState({address:e})},n.handleSelect=function(e){Object(B.geocodeByAddress)(e).then((function(e){var t=e[0];console.log("fullAddresObj",t),n.setState({address:t.formatted_address})})).catch((function(e){console.log(e),alert(e.message)}))},n.state={address:""},n}return Object(p.a)(a,[{key:"render",value:function(){return l.a.createElement(F.a,{value:this.state.address,onChange:this.handleChange,onSelect:this.handleSelect},(function(e){var t=e.getInputProps,a=e.suggestions,n=e.getSuggestionItemProps,c=e.loading;return l.a.createElement("div",null,l.a.createElement("input",t({placeholder:"Search Places ...",className:"location-search-input"})),l.a.createElement("div",{className:"autocomplete-dropdown-container"},c&&l.a.createElement("div",null,"Loading..."),a.map((function(e){var t=e.active?"suggestion-item--active":"suggestion-item",a=e.active?{backgroundColor:"#fafafa",cursor:"pointer"}:{backgroundColor:"#ffffff",cursor:"pointer"};return l.a.createElement("div",n(e,{className:t,style:a}),l.a.createElement("span",null,e.description))}))))}))}}]),a}(l.a.Component);a(81);var U=function(){var e=Object(n.useState)(""),t=Object(P.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(""),o=Object(P.a)(r,2),s=o[0],m=o[1],u=Object(n.useState)(""),d=Object(P.a)(u,2),g=d[0],h=d[1],p=Object(n.useState)(""),E=Object(P.a)(p,2),v=E[0],b=E[1],O=Object(n.useState)(""),j=Object(P.a)(O,2),y=j[0],k=j[1],D=Object(n.useState)(""),x=Object(P.a)(D,2),S=x[0],L=x[1],M=Object(n.useState)(""),T=Object(P.a)(M,2),I=T[0],B=T[1],F=Object(n.useState)(""),U=Object(P.a)(F,2),_=(U[0],U[1]),J=Object(n.useState)("Which city are you located in?"),q=Object(P.a)(J,2),Y=q[0],G=q[1],H=Object(n.useState)({success:!1,url:"../../../img/dog-icon.png",error:!1,errorMessage:""}),K=Object(P.a)(H,2),V=K[0],$=K[1],Q=Object(n.useState)(),X=Object(P.a)(Q,2),Z=X[0],ee=X[1],te=Object(n.useState)(!1),ae=Object(P.a)(te,2),ne=ae[0],le=(ae[1],Object(i.g)().id);Object(n.useEffect)((function(){w.getDog(le).then((function(e){c(e.data.name),m(e.data.age),h(e.data.breed),b(e.data.size),k(e.data.gender),L(e.data.description),B(e.data.image),_(e.data.likes),G(e.data.location)})).catch((function(e){return console.log(e)})),w.getNewDogs().then((function(e){console.log(e)}))}),[]);var ce=function(e){e.preventDefault(),a&&g&&s&&y&&v&&S&&Y?w.saveDogProfile(le,{name:a,breed:g,age:s,gender:y,size:v,description:S,image:I,location:Y}).then((function(e){console.log(e),console.log("Profile saved")})).catch((function(e){return console.log(e)})):console.log("form isn't complete")},re=function(){return l.a.createElement("div",null,l.a.createElement("p",{style:{color:"green"}},"SUCCESSFUL UPLOAD"))},oe=function(){return l.a.createElement("div",null,l.a.createElement("h3",{style:{color:"red"}},"FAILED UPLOAD"))};return l.a.createElement(l.a.Fragment,null,l.a.createElement(C,null),l.a.createElement(A,null,l.a.createElement(R,null,l.a.createElement(W,{size:"6"},l.a.createElement("div",{id:"profile-img-div"},l.a.createElement("img",{src:I,alt:"default dog",id:"profile-img"})),V.success?l.a.createElement(re,null):null,V.error?l.a.createElement(oe,null):null,l.a.createElement("input",{type:"file",onChange:function(e){$(Object(f.a)(Object(f.a)({},V),{},{success:!1,url:"../../../img/dog-icon.png"})),ee(e.target.files[0])}}),l.a.createElement("div",{className:"input-field"},l.a.createElement("button",{className:"waves-effect waves-light btn-large",onClick:function(e){var t=Z,a=Z.name.split("."),n="".concat(le,"/").concat(a[0]),l=a[1];console.log("Preparing the upload"),N.a.post("http://localhost:3001/sign_s3",{fileName:n,fileType:l}).then((function(e){var a=e.data.data.returnData.signedRequest,n={headers:{"Content-Type":l}};N.a.put(a,t,n).then((function(t){console.log("Response from s3"),$(Object(f.a)(Object(f.a)({},V),{},{success:!0,url:e.data.data.returnData.url})),B(e.data.data.returnData.url)})).catch((function(e){alert("ERROR "+JSON.stringify(e))}))})).catch((function(e){alert(JSON.stringify(e))}))}},"UPLOAD"))),l.a.createElement(W,{size:"6"},l.a.createElement("form",{onSubmit:ce},l.a.createElement("h4",{className:"fieldLabelTxt"},"Profile"),l.a.createElement("div",{className:"divider"}),l.a.createElement("h5",{className:"fieldLabelTxt"},"Name:"),l.a.createElement("div",{className:"input-field"},l.a.createElement("input",{placeholder:a,type:"text",className:"validate",onChange:function(e){return c(e.target.value)},name:"name",readOnly:ne})),l.a.createElement("h5",{className:"fieldLabelTxt"},"Breed:"),l.a.createElement("div",{className:"input-field"},l.a.createElement("input",{placeholder:g,type:"text",className:"validate",onChange:function(e){return h(e.target.value)},name:"breed",readOnly:ne})),l.a.createElement("div",{className:"col s6"},l.a.createElement("h5",{className:"fieldLabelTxt"},"Age:"),l.a.createElement("div",{className:"input-field"},l.a.createElement("input",{placeholder:s,type:"text",className:"validate",onChange:function(e){return m(e.target.value)},name:"age",readOnly:ne}))),l.a.createElement("div",{className:"col s6"},l.a.createElement("h5",{className:"fieldLabelTxt"},"Gender:"),l.a.createElement("select",{className:"browser-default",onChange:function(e){return k(e.target.value)},name:"gender",value:y,disabled:ne},l.a.createElement("option",{disabled:!0},"What's their gender?"),l.a.createElement("option",null,"Male"),l.a.createElement("option",null,"Female"))),l.a.createElement("div",{className:"col s12",style:{paddingBottom:"20px"}},l.a.createElement("h5",{className:"fieldLabelTxt"},"Size:"),l.a.createElement("select",{className:"browser-default",onChange:function(e){return b(e.target.value)},name:"size",value:v,disabled:ne},l.a.createElement("option",{disabled:!0},"What's their size?"),l.a.createElement("option",null,"Small"),l.a.createElement("option",null,"Medium"),l.a.createElement("option",null,"Large"))),l.a.createElement("div",{className:"wrapper",style:{paddingTop:"100px"}},l.a.createElement("h5",{className:"fieldLabelTxt"},"About Me:"),l.a.createElement("div",{className:"input-field"},l.a.createElement("textarea",{id:"textarea1",className:"materialize-textarea",onChange:function(e){return L(e.target.value)},name:"description",disabled:ne}),l.a.createElement("label",{htmlFor:"textarea1"},S))),l.a.createElement("h5",{className:"fieldLabelTxt"},"Parks I Enjoy:"),l.a.createElement("div",{className:"input-field"},l.a.createElement(z,null)),l.a.createElement("div",{className:"col s12",style:{paddingBottom:"20px"}},l.a.createElement("h5",{className:"fieldLabelTxt"},"Location:"),l.a.createElement("select",{className:"browser-default",onChange:function(e){return G(e.target.value)},name:"location",value:Y,disabled:ne},l.a.createElement("option",{disabled:!0},"Which city are you located in?"),l.a.createElement("option",null,"Toronto"),l.a.createElement("option",null,"Markham"),l.a.createElement("option",null,"Mississauga"))),l.a.createElement("button",{className:"btn submit",onClick:ce},"Save"),")")))))},_=(a(86),a(87),function(e){var t=e.children,a=Object(i.f)();return l.a.createElement(s.a,{domain:"dev-hdstwd1l.us.auth0.com",clientId:"KTFJ3BDkpepyvnqBmbtykWMLECedgxEV",redirectUri:window.location.origin,onRedirectCallback:function(e){a.push((null===e||void 0===e?void 0:e.returnTo)||window.location.pathname)}},t)}),J=a(38),q=function(e){var t=e.component,a=Object(J.a)(e,["component"]);return l.a.createElement(i.a,Object.assign({component:Object(s.c)(t,{onRedirecting:function(){return l.a.createElement(L,null)}})},a))};var Y=function(){return l.a.createElement(o.a,null,l.a.createElement(_,null,l.a.createElement(i.c,null,l.a.createElement(i.a,{exact:!0,path:"/",component:I}),l.a.createElement(q,{exact:!0,path:"/dogs/:id",component:U}))))},G=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function H(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}r.a.render(l.a.createElement(Y,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("","/service-worker.js");G?function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):H(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e):H(e)}))}}()}},[[39,1,2]]]);
//# sourceMappingURL=main.e9c0cd67.chunk.js.map